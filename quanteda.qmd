# Introduction to Quanteda {#sec-quanteda}

```{r setup}
#| echo: false
#| include: false

source("_common.R")
```

For all analyses involving separating text into smaller units (e.g. words), this book will use the **Quanteda** family of packages. While it lacks some of the conceptual elegance of [the tidyverse](https://www.tidyverse.org), Quanteda is indispensable because of its scope and efficiency---Quanteda functions are faster to write, faster to run, and applicable to a wider variety of uses than any other text analysis framework in R. Beyond the base `quanteda` package, Quanteda offers a plethora of specialized extensions, for example:

-   `quanteda.textstats`: Metrics for similarity, readability, lexical diversity, and more
-   `quanteda.dictionaries`: Dictionaries for word counting applications
-   `quanteda.sentiment`: Tools for advanced dictionary-based sentiment analysis (see @sec-word-counting-improvements)

Quanteda is also well documented. See the [Quanteda tutorials webpage](https://tutorials.quanteda.io) for details on file formats and methods not covered in this book. 

```{r}
#| output: false
library(quanteda)
```

The home-base of any Quanteda analysis is the _corpus_. A corpus is a static container holding a library of text documents and associated properties of those documents, called _docvars_. Later, when we apply complex transformations to our texts (such as splitting them into words), we will need to first store them as a corpus.

You can create corpora from a variety of data formats, but we will begin with a dataframe containing our text variable, `story`.

```{r}
hippocorpus_df <- read_csv("data/hippocorpus-u20220112/hcV3-stories.csv") |> 
  select(AssignmentId, story, memType, summary, WorkerId, 
         annotatorGender, openness, timeSinceEvent)

head(hippocorpus_df)
```

To turn this into a corpus with the `corpus()` constructor, specify the text variable and a unique identifier by name. All other variables will automatically become _docvars_.

```{r}
hippocorpus_corp <- corpus(hippocorpus_df, 
                           docid_field = "AssignmentId", 
                           text_field = "story")
hippocorpus_corp
```
