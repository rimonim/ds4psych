{
  "hash": "8df7e6d71e764706710e2a6f86079138",
  "result": {
    "engine": "knitr",
    "markdown": "# Don't Distract From the Story {#sec-telling-a-story}\n\n\n\n\n\nThe hardest part of data visualization is identifying a story in the first place. This is especially true in natural language processing---since language is such a rich source of information, it is sometimes hard to decide what aspect of it to focus on. The stories are hiding in plain sight. The job of the data visualizer is to find them and bring them out into the open.\n\n## A Small, Compelling Story is Better Than a Big, Confusing One {#sec-simplify-the-story}\n\n@schwartz_etal_2013 collected 15.4 million Facebook status updates from participants who had filled out a variety of questionnaires on the *My Personality* application (discussed in @sec-ethics). They analyzed the frequencies of millions of words, phrases, and topics as they correlate with gender, age, and personality traits of the author. The resulting paper focused on methodology, but @schwartz_etal_2013 nevertheless understood the importance of telling a good story. Here is their figure 5B:\n\n[![Figure from @schwartz_etal_2013](images/schwartz_etal_2013_fig5C.png){fig-alt=\"The older people are, the more they say 'we' and the less they say 'I'\"}](https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0073791)\n\nThis is a beautiful data visualization. The story it tells is so clear and simple that it doesn't need a caption: Older people use \"I\" less and \"we\" more. The unstated implication is either that people get less individualistic with age, or that the young people of today are self-centered. Both are excellent stories.\n\nHow did Schwartz et al. achieve such a clear story? Let's take a closer look at some of their choices:\n\nFirst, out of millions of words, phrases, and topics in their analysis, they chose to focus this visualization on only two. This is the first step of story-telling with data: remove distractions. A small, compelling story is better than a big, confusing one.\n\nSecond, they chose not to show the data points themselves, but to represent the overall trends with regression lines. This is a major sacrifice, since it makes the graph much less informative---any good scientist will wonder about the distributions surrounding these lines: How rare are community-oriented 20-year-olds? What about self-centered 60-year-olds? Nevertheless, Schwartz et al. decided that including a scatter plot behind the lines would make the graph too confusing to look at, and distract from the main story.\n\nThird, they chose to use bendy LOESS regression lines, even though the main analysis of the paper was conducted with linear regression. This was a great choice because it makes the story more convincing. The fact that even LOESS lines show near-linear trends is impressive. Even though there are no data points to be seen, those steady lines give the impression that the underlying data are reliable. Also, the the LOESS lines give the viewer the opportunity to notice nuances in the story without distracting from the big picture (it is fascinating that \"we\" reaches it's all-time low around the time most people move out of their parents' house, and not before).\n\nLastly, let's take a look at the y axis: What is \"Standardized Frequency\"? We have an intuitive idea that higher means using the word more and lower means using it less. But this intuitive simplicity did not come easily---it had to be carefully constructed by the authors of the paper. Actually, \"Standardized Frequency\" is calculated using this formula:\n\n[![Figure from @schwartz_etal_2013](images/schwartz_etal_2013_equation.png){fig-alt=\"Complicated Equation\"}](https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0073791#s6)\n\nDon't understand any of this? That's OK. We'll cover methods of standardizing word frequencies in @sec-word-counting-improvements. For now, the point is this: **Sometimes you have to do something complicated to make something simple**. If Schwartz et al. had not performed them, \"I\" would likely be much higher frequency than \"we\" at all ages, and the story, which requires the viewer to focus on the slopes of the lines, would be much harder to appreciate.\n\n## Engineer Your Aesthetics\n\nWe have just seen in Schwartz et al.'s beautiful data visualization (@sec-simplify-the-story) that choosing to map the `frequency` variable to the y position aesthetic was not enough. In order to make the story clear, they carefully engineered the scale on which they measured frequency. In their case, this required some complicated standardization tailored to the particular statistics underlying their data. Often though, the solution is much more straightforward.\n\nThe remainder of this chapter outlines some common ways to engineer aesthetics that can help make a story clear and intuitive.\n\n### Nonlinear Axes {#sec-nonlinear-axes}\n\nOften a simple log scale is enough to reveal a much clearer presentation of data. The following graph uses data from @buechel_etal_2018, in which participants read news stories, rated their own empathy and distress after reading them, and then described their thoughts in their own words.\n\nThis visualization tells a story about the most and least common words in participant's responses.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggrepel)\nlibrary(patchwork)\n\ndistressed_texts_binary_ordered <- distressed_texts_binary |> \n  # ratio of distressed frequency to non-distressed frequency\n  mutate(distressed_freq_ratio = distressed_count/nondistressed_count) |> \n  # refactor in descending order\n  arrange(distressed_freq_ratio) |> \n  mutate(word = factor(word, levels = word))\n\nset.seed(2023)\nbadplot1 <- distressed_texts_binary_ordered |> \n  ggplot(aes(word, distressed_freq_ratio, label = word)) +\n    geom_point(color = \"blue3\", \n               size = 1, \n               alpha = .2) +\n    geom_text_repel(\n      size = 3, \n      data = distressed_texts_binary_ordered |> \n        filter(distressed_freq_ratio > 1.75)) +\n    labs(title = \"Linear Scale\",\n         x = \"Words, from least to most distressed\",\n         y = \"Distressed frequency / non-distressed frequency\") +\n    scale_y_continuous(breaks = seq(-.5, 2, .5)) +\n    theme_minimal() +\n    theme(\n      plot.title = element_text(color = \"red3\", hjust = 1, size = 20),\n      panel.grid.major.x = element_blank(),\n      axis.text.x = element_blank(),\n      axis.ticks.x = element_blank(),\n      axis.title.x = element_text(size = 15)\n      )\n\nset.seed(2023)\ngoodplot1 <- distressed_texts_binary_ordered |> \n  ggplot(aes(word, distressed_freq_ratio, \n             label = word, \n             color = distressed_freq_ratio < 1)\n         ) +\n    geom_point(size = 1, alpha = .2) +\n    geom_text_repel(\n      size = 3, \n      data = distressed_texts_binary_ordered |> \n        filter(distressed_freq_ratio > 1.75 | distressed_freq_ratio < 1/2),\n      max.overlaps = 20) +\n    geom_hline(linetype = 2, yintercept = 1) +\n    labs(title = \"Log Scale\",\n         x = \"Words, from least to most distressed\",\n         y = \"Distressed frequency / non-distressed frequency\") +\n    scale_y_continuous(\n      breaks = c(2^(-6:6)), \n      trans = \"log2\", \n      labels = ~MASS::fractions(.x)\n      ) +\n    guides(color = \"none\") +\n    theme_minimal() +\n    theme(\n      plot.title = element_text(color = \"green3\", hjust = 1, size = 20),\n      panel.grid.major.x = element_blank(),\n      axis.text.x = element_blank(),\n      axis.ticks.x = element_blank(),\n      axis.title.x = element_text(size = 15)\n      )\n\ngoodplot1 + badplot1\n```\n\n::: {.cell-output-display}\n![](telling-a-story_files/figure-html/unnamed-chunk-2-1.png){width=768}\n:::\n:::\n\n\nWhen plotting ratios, it is almost always a good idea to use a log scale (left). This way, the viewer can compare the largest and the smallest relative values. Without the log scale (right), the smallest values are squished into oblivion.\n\n### Ordering Categorical Variables {#sec-ordering-categorical-variables}\n\nTake another look at the graph labeled \"Log Scale\" above, and notice the ordering along the x axis. Words, on their own, are an unordered categorical variable. Nevertheless, **in the context of a story, even unordered variables have an order**. Ordering the categorical variable along the continuous variable of interest calls attention to the distribution and removes confusion.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggrepel)\nlibrary(patchwork)\n\nset.seed(2023)\nbadplot2 <- distressed_texts_binary |> \n  # ratio of distressed frequency to non-distressed frequency\n  mutate(distressed_freq_ratio = distressed_count/nondistressed_count) |> \n  ggplot(\n    aes(\n      word, distressed_freq_ratio, \n      label = word, \n      color = distressed_freq_ratio < 1\n      )\n    ) +\n    geom_point(size = 1, alpha = .7) +\n    geom_text_repel(\n      size = 3, \n      data = distressed_texts_binary_ordered |> \n        filter(distressed_freq_ratio > 1.75 | distressed_freq_ratio < .5),\n      max.overlaps = 20\n      ) +\n    geom_hline(linetype = 2, yintercept = 1) +\n    labs(\n      title = \"Unordered\",\n      x = \"Words\",\n      y = \"Distressed frequency / non-distressed frequency\"\n      ) +\n    scale_y_continuous(\n      breaks = c(2^(-6:6)), \n      trans = \"log2\", \n      labels = ~MASS::fractions(.x)\n      ) +\n    guides(color = \"none\") +\n    theme_minimal() +\n    theme(\n      plot.title = element_text(color = \"red3\", hjust = 1, size = 20),\n      panel.grid.major.x = element_blank(),\n      axis.text.x = element_blank(),\n      axis.ticks.x = element_blank(),\n      axis.title.x = element_text(size = 15)\n      )\n\ngoodplot2 <- goodplot1 + labs(title = \"Ordered\")\n\ngoodplot2 + badplot2\n```\n\n::: {.cell-output-display}\n![](telling-a-story_files/figure-html/unnamed-chunk-3-1.png){width=768}\n:::\n:::\n\n\n### Color Scales {#sec-color-scales}\n\nWe have already seen how a data visualizer can clarify a story by spatially ordering a categorical variable. A carefully tailored color scale can be an even more powerful communicator than an x or y axis. This is because color, even though it is usually treated as a single aesthetic, actually has many dimensions: luminosity, saturation, redness, blueness, etc.\n\nThe first step in choosing a color scale for any variable is to consider whether the thing being measured is diverging, sequential, or qualitative.\n\n**Diverging scales** measure something with a neutral center. This center is often represented by zero, but beware! Sometimes a neutral center is 4 on a seven point Likert scale (see \"Agreement\" in the figure below). When dealing with fractions, the neutral center is 1 (see \"Frequency Ratio\" in the figure below).\n\nWhen applying diverging scales, keep in mind any associations people might have with the colors involved. For example, red should always be *bad* and blue/green *good* (see the plot in @sec-ordering-categorical-variables, in which red = distress = bad).\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](telling-a-story_files/figure-html/unnamed-chunk-4-1.png){width=768}\n:::\n:::\n\n\n**Sequential scales** measure something that has an order, but no neutral center. Often, one side of the scale is at zero, so that the scale goes from nothing to something. In these cases, the appropriate color scale will represent amount with luminosity, where zero is the lightest (see \"Frequency\" and \"Anxiety\" in the figure below). This way, the lower amounts have lower contrast against the white background of the plot (if using a non-white plot background, make sure the low end of the scale matches).\n\nSometimes sequential scales do not measure amount, as in \"Weekdays\" in the figure below. Weekdays have an order---rom the beginning of the week to the end---ut it would be a mistake to use a scale with one side blending in to the background and the other intensely dark, since that would suggest that Thursday is somehow 'more' than Wednesday. Likewise, there is no neutral center (there's nothing neutral about Wednesday). In such case, the scale should go from one noticeable color to another. The chart below uses a palette reminiscent of sunset to give the impression of time passing.\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](telling-a-story_files/figure-html/unnamed-chunk-5-1.png){width=768}\n:::\n:::\n\n\nTo emphasize the point about weekdays, consider the following two versions of the same graph (data taken from Reddit users associated with subreddits for 9 US cities):\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](telling-a-story_files/figure-html/unnamed-chunk-7-1.png){width=768}\n:::\n:::\n\n\nBoth versions are confusing to look at (these data might be better represented as a heat map), but the one with the sequential color scale is much better. Whereas the qualitative scale requires the viewer to look constantly back and forth between the legend and the plot, the sequential scale maps to an intuitive understanding of beginning-of-week vs. end-of-week.\n\nWe have seen that many seemingly unordered variables should be ordered in the context of a story. Nevertheless, some variables are truly **qualitative**. In these cases, the color scale should maximize contrast between neighboring values without accidentally suggesting an order. For example, \"Parts of Speech\" in the figure below are all soft pastel colors. If some were darker or more saturated, it might suggest that there is an important difference between the groups.\n\nAgain, keep in mind any associations people might have with colors involved. For example, countries should be represented by colors that appear in their flags. This is of course sometimes difficult---all of the countries in the figure below have red in their flag, and all but China have blue and white. Nevertheless, try your best. The [Wikipedia page for national colors](https://en.wikipedia.org/wiki/National_colours) was helpful in making the chart below.\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](telling-a-story_files/figure-html/unnamed-chunk-8-1.png){width=768}\n:::\n:::\n\n\n### Accent colors {#sec-accent-colors}\n\nBecause color has many dimensions, it can sometimes be used to represent two scales at the same time. One common tactic is to use luminosity or saturation to emphasize certain values and de-emphasize others. Below, we have redrawn the frequency ratio plot from earlier in this chapter (@sec-nonlinear-axes) to tell a story about two words in particular. By using accent colors to emphasize the two words of interest, we remove distractors while maintaining the broader context of the story.[^telling-a-story-1]\n\n[^telling-a-story-1]: In the example here, we used `ggnewscale` to control the accented an non-accented color scales separately. If you'd like a simpler method for accenting values without using layered geoms, we recommend the `gghighlight` package.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggnewscale)\n\nset.seed(2023)\ndistressed_texts_binary_ordered |> \n  ggplot(aes(word, distressed_freq_ratio, \n             label = word, \n             color = distressed_freq_ratio < 1)) +\n    geom_point() +\n    geom_hline(linetype = 2, yintercept = 1) +\n    scale_color_discrete(\n      type = colorspace::lighten(c(\"#F8766D\", \"#00BFC4\"), .7)) +\n    geom_text_repel(\n      size = 3, \n      data = distressed_texts_binary_ordered |> \n        filter(distressed_freq_ratio > 3.6 \n               | distressed_freq_ratio < .2),\n      max.overlaps = 20) +\n    guides(color = \"none\") +\n    new_scale_color() +\n    geom_point(\n      aes(color = distressed_freq_ratio < 1), \n      size = 3,\n      data = distressed_texts_binary_ordered |> \n        filter(word %in% c(\"i\", \"we\"))) +\n    geom_text_repel(\n      size = 4, \n      data = distressed_texts_binary_ordered |> \n        filter(word %in% c(\"i\", \"we\")),\n      max.overlaps = 20) +\n    labs(title = '\"We\" is a Sign of Distress',\n         x = \"Words, from least to most distressed\",\n         y = \"Distressed frequency / non-distressed frequency\") +\n    scale_y_continuous(breaks = c(2^(-6:6)), \n                       trans = \"log2\", \n                       labels = ~MASS::fractions(.x)) +\n    guides(color = \"none\") +\n    theme_minimal() +\n    theme(plot.title = element_text(hjust = .5, size = 18),\n          panel.grid.major.x = element_blank(),\n          axis.text.x = element_blank(),\n          axis.ticks.x = element_blank())\n```\n\n::: {.cell-output-display}\n![](telling-a-story_files/figure-html/unnamed-chunk-9-1.png){width=576}\n:::\n:::\n\n\n### Aspect Ratios {#sec-aspect-ratios}\n\n@simchon_etal_2021 investigated whether COVID-19 concern among New Yorkers resulted in higher or lower levels of certainty, as expressed in language on Twitter. Their story: Higher concern leads to greater expressions of certainty, since people use certainty as a coping mechanism. Here is their Figure 3, reproduced in three different aspect ratios:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(patchwork)\n\nplot <- covid_concern |> \n  mutate(z_cert = as.numeric(scale(cert)),\n         z_concern = as.numeric(scale(ny_net_concern))) |> \n  pivot_longer(cols = c(z_cert, z_concern)) |> \n  mutate(name = if_else(name==\"z_cert\", \"Certainty\", \"NY Net Concern\")) |> \n  ggplot() +\n    geom_smooth(aes(date, value, \n                    linetype = name), \n                se = FALSE, method = \"loess\", \n                color = \"black\", span = 1/3, \n                method.args = list(degree=1)) +\n    ylab(\"Z-score\") + \n    xlab(\"Date\") + \n    scale_colour_grey() +\n    cowplot::theme_cowplot() + \n    labs(linetype =c(\"\"))\n\nplot_squished <- plot + \n  theme(axis.text.x = element_text(angle = 45, hjust = 1))\n\n(plot_squished + plot_squished +  \n    plot_layout(widths = c(1, 2))) / \n  plot + plot_layout(heights = c(2, 1)) +\n  plot_annotation(tag_levels = 'A')\n```\n\n::: {.cell-output-display}\n![](telling-a-story_files/figure-html/unnamed-chunk-11-1.png){width=960}\n:::\n:::\n\n\nWhich aspect ratio is the right one? A good aspect ratio is one that communicates the meaning of the variables in question. Since months are spread out over time (by definition), it makes sense to make the x-axis longer so that viewers have the feeling of time passing as they scan it. But it shouldn't be too wide, since the aspect ratio should also emphasize important differences in position (here, the positive slope of both lines). Something in between B and C seems appropriate. Indeed, this is the figure printed in the final paper:\n\n![](images/simchon_etal_2021_fig3.png)\n\n------------------------------------------------------------------------\n\nAs always, press the \"View Source\" button below to see the hidden code blocks in this chapter.\n\n------------------------------------------------------------------------\n",
    "supporting": [
      "telling-a-story_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}